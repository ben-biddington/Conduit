<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="..\..\packages\xunit.core.2.1.0\build\portable-net45+win8+wp8+wpa81\xunit.core.props" Condition="Exists('..\..\packages\xunit.core.2.1.0\build\portable-net45+win8+wp8+wpa81\xunit.core.props')" />

  <Target Name="RunTests">
    <PropertyGroup>
      <ExeLauncher Condition="('$(OS)' != 'Windows_NT')">mono --runtime=v4.0.30319</ExeLauncher>
    </PropertyGroup>
    <Exec Command="$(ExeLauncher) nunit-console.exe $(OutputPath)$(AssemblyName).dll"
          WorkingDirectory="$(SolutionDir)\packages\NUnit.Runners.2.6.3\tools" />
  </Target>
  
  <UsingTask TaskName="Xunit" AssemblyFile="project/Conduit.Adapters.Build/bin/Debug/Conduit.Adapters.Build.dll" />
  <UsingTask TaskName="List" AssemblyFile="project/Conduit.Adapters.Build/bin/Debug/Conduit.Adapters.Build.dll" />

  <Target Name="list.tasks">
    <List />
  </Target>

  <Target Name="unit.test">
    <Xunit TestAssembly="project/Conduit.Unit.Tests/bin/Debug/Conduit.Unit.Tests.dll" />
  </Target>

  <Target Name="integration.test">
    <Xunit TestAssembly="project/Conduit.Integration.Tests/bin/Debug/Conduit.Integration.Tests.dll" />
  </Target>

  <Target Name="all.test">
    <CallTarget Targets="unit.test;integration.test"/>
  </Target>
</Project>
